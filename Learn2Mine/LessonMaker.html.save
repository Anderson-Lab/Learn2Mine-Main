<!DOCTYPE html>
{% autoescape true %}
<html>
<link type="text/css" rel="stylesheet" href="/stylesheets/main.css" />
<title>Learn2Mine Lesson Maker</title>
<script type="text/javascript">
    function validateUpdate() {
	if (updateLesson.removeRcode.checked && updateLesson.removePython.checked) {
	    for (
	    alert(updateLesson.removeQuestion);
	    return false;
	}
    }
</script>
<body>
<a href="http://birg.cs.cofc.edu/index.php/Anderson_Lab"><img src="/images/Paul-labs-logo.png" align="right" title="BiRG Labs" style="width: 75px;"></a>
        <a id="home" href="Home"><div id="banner"><img id=bannerImg src='images/learn2mine.png' title="LOOK AT BANNER, MICHAEL!"/></a></div>
        <div id="lava">
                <ul>
                        <li><a id="home" href="Home"><div class="sitenav" id="homelink">Home</div></a></li>
                        <li><a id="profile" href="Profile"><div class="sitenav" id="profilelink">Profile</div></a></li>
                        <li><a id="leaderboard" href="Leaderboard"><div class="sitenav" id="leaderlink">Leaderboard</div></a></li>
                        <li><a id="grade" href="Grader"><div class="sitenav" id="gradelink">Grade</div></a></li>
                        <li><a id="about" href="About"><div class="sitenav" id="aboutlink">About</div></a></li>
                        <li><a id="help" href="Help"><div class="sitenav" id="helplink">Help</div></a></li>
                        <li><a id="rstudio" target="_blank" href="http://portal.cs.cofc.edu/learn2mine-rstudio"><div class="sitenav" id="rstudiolink">Rstudio</div></a></li>
                        <li><a id="customlesson" href="CustomLesson"><div class="sitenav" id="lessoncreatorlink">Create</div></a></li>
                </ul>
                <div class="loggedin">{{user}}</div>
        </div>
	<h1>Submit code for Learn2Mine Lesson</h1>
	<h3>Lesson name is required; but initialization, finalization, and instructor code are not for each question</h3>

	Submit lesson plan then <a href="http://localhost:8080/LessonPreview?page={{ lessonName }}" target="_blank">click here</a> to preview your lesson plan as it would appear in Learn2Mine.
	Refresh the page as updates are submitted to view changes.<br>

	<br>
                <form name="updateLesson" action="/LessonUpdate" id="lessonUpdate" method="post" onsubmit="return validateUpdate()">
		Change Language Options<br>
		{% if languages|length == 1 %}
			{% if languages[0] == "Python" %}
				<input type="checkbox" name="addRcode" value="yes">Add option to submit answers using R
			{% elif languages[0] == "R" %}
				<input type="checkbox" name="addPython" value="yes">Add option to submit answers using Python
			{% endif %}
		{% else %}
			<input type="checkbox" name="removeRcode" id="removeRcode" value="yes">Remove option to submit answers using R<br>
			<input type="checkbox" name="removePython" id="removePython" value="yes">Remove option to submit answers using Python	
		{% endif %}
		<br><br>
		Remove Questions from Lesson<br>
                {% for i in range(0,(questionCount|int)) %}
	                <input type="checkbox" name="removeQuestion" value="{{ i }}">Remove Question {{ i+1 }}<br>
		{% endfor %}
		<br>
		Add Questions to Lesson<br>
		<select id="addQuestions" name="addQuestions" form="lessonUpdate">
		<option value="0"></option>
		{% for i in range(1,(11-questionCount|int)) %}
			<option value="{{i}}">{{i}}</option>
		{% endfor %}
		</select> 

                <input type="hidden" name="lessonName" value={{ lessonName }} />
                <input type="hidden" name="questionCount" value={{ questionCount }} />
		<input type="hidden" name="python" value={{ python }} />
		<input type="hidden" name="rcode" value={{ rcode }} />
		<input type="hidden" name="languages" value={{ languages }} />
                <div id="lessonMakerSubmit"><input type="submit" value="Update Lesson Parameters"></div>
		</form>
		<br><br><br>


	<form action="/LessonMaker" method="post" name="lessonModify">

		Full Lesson Name: <input type="text" name=fullLesson value='{{ fullLesson }}'><br><br>
		Paragraph<br>
                <textarea id="lessonMakerTextarea" name="paragraph" rows="6" cols="80">{{ paragraph }}</textarea></div><br><br><br><br>

{% if languages|length != 1 %}

		{% for i in range(0,(questionCount|int)) %}

		      	<div id="lessonMakerProblem">Problem Statement: Question {{ i+1 }}<br>
			<textarea id="lessonMakerTextarea" name="problem" rows="6" cols="80">{{ problems[loop.index0] }}</textarea></div><br><br>
		<div id="lessonMakerWrap">
		    <div id="lessonMakerLeft">

			R Init Code: Question {{ i+1 }}
		      	<div><textarea id="lessonMakerTextarea" name="R-init" rows="6" cols="80">{{ R_init_code[loop.index0] }}</textarea></div>

			R Instructor Code: Question {{ i+1 }}
			<div><textarea id="lessonMakerTextarea" name="R-instruct" rows="6" cols="80">{{ R_instruct_code[loop.index0] }}</textarea></div>

			R Final Code: Question {{ i+1 }}
			<div><textarea id="lessonMakerTextarea" name="R-final" rows="6" cols="80">{{ R_final_code[loop.index0] }}</textarea></div><br><br>
		    </div>
		    <div id="lessonMakerRight">

                        Python Init Code: Question {{ i+1 }}
                        <div><textarea id="lessonMakerTextarea" name="Python-init" rows="6" cols="80">{{ Python_init_code[loop.index0] }}</textarea></div>

                        Python Instructor Code: Question {{ i+1 }}
                        <div><textarea id="lessonMakerTextarea" name="Python-instruct" rows="6" cols="80">{{ Python_instruct_code[loop.index0] }}</textarea></div>

                        Python Final Code: Question {{ i+1 }}
                        <div><textarea id="lessonMakerTextarea" name="Python-final" rows="6" cols="80">{{ Python_final_code[loop.index0] }}</textarea></div>

                        <br><br>
		    </div>
		</div>
                {% endfor %}

{% else %}

		{% for i in range(0,(questionCount|int)) %}
		      	Problem Statement: Question {{ i+1 }}<br>
			<textarea id="lessonMakerTextarea" name="problem" rows="6" cols="80">{{ problems[loop.index0] }}</textarea></div><br><br>

			{{ languages[0] }} Init Code: Question {{ i+1 }}
		      	<div><textarea id="lessonMakerTextarea" name="{{ languages[0] }}-init" rows="6" cols="80">{{ init_code[loop.index0] }}</textarea></div>

			{{ languages[0] }} Instructor Code: Question {{ i+1 }}
			<div><textarea id="lessonMakerTextarea" name="{{ languages[0] }}-instruct" rows="6" cols="80">{{ instruct_code[loop.index0] }}</textarea></div>

			{{ languages[0] }} Final Code: Question {{ i+1 }}
			<div><textarea id="lessonMakerTextarea" name="{{ languages[0] }}-final" rows="6" cols="80">{{ final_code[loop.index0] }}</textarea></div>

			<br><br>
		{% endfor %}
{% endif %}
		<input type="hidden" name="python" value={{ python }} />
		<input type="hidden" name="rcode" value={{ rcode }} />
		<input type="hidden" name="languages" value={{ languages }} />
		<input type="hidden" name="questionCount" value={{ questionCount }} />
		<input type="hidden" name="lessonName" value={{ lessonName }} />
		<div id="lessonMakerSubmit"><input type="submit" value="Submit Lesson Plan"></div>
	</form><br>
<a href="{{ url|safe }}">{{ url_linktext }}</a>
<br><br>
</body>
</html>
{% endautoescape %}
